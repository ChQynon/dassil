# Telegram Contest Registration Bot

Бот для создания конкурсов и регистрации участников в Telegram-канале.

## Функциональность

- Администратор может создавать новые конкурсы
- Публикация и закрепление постов с кнопкой регистрации в канале
- Регистрация участников через бота
- Обновление списка участников в посте канала
- Установка дедлайнов для конкурсов
- Рассылка сообщений всем зарегистрированным участникам
- Расширенные настройки регистрации и отслеживание участников
- Кастомизация инлайн-кнопок

## Настройка

Настройки бота находятся в файле `src/config.js`:
- `BOT_TOKEN` - токен бота, полученный от @BotFather
- `CHANNEL_ID` - ID канала, в котором будут публиковаться посты
- `ADMIN_ID` - ID администратора, который будет управлять ботом

## Команды для администратора

### Основные команды
- `/new_contest` - создать новый конкурс
- `/set_deadline [ID конкурса] [дата]` - установить дедлайн для конкурса
- `/broadcast [ID конкурса] [сообщение]` - разослать сообщение всем участникам конкурса
- `/list_contests` - показать список активных конкурсов

### Расширенные настройки
- `/registrations [ID конкурса]` - просмотр детальной информации о регистрациях
- `/edit_buttons [ID конкурса]` - изменение инлайн-кнопок после публикации поста

## Расширенные возможности

### Во время создания конкурса
1. Добавление полей для формы регистрации (имя, email, телефон и т.д.)
2. Настройка кнопок (текст и callback data)
3. Создание дополнительных кнопок для поста

### После публикации конкурса
1. Просмотр списка зарегистрированных участников с временем регистрации
2. Экспорт списка участников (CSV, текстовый файл)
3. Редактирование кнопок в уже опубликованном посте

### Для регистрации пользователей
1. Многошаговый процесс регистрации с заполнением формы
2. Сохранение дополнительной информации об участнике
3. Отображение списка зарегистрированных участников в посте канала

## Локальный запуск

```
npm install
npm run start
```

Для разработки с автоматическим перезапуском:
```
npm run dev
```

## Деплой на Vercel

1. Создайте аккаунт на [Vercel](https://vercel.com/)
2. Установите CLI:
   ```
   npm install -g vercel
   ```
3. Залогиньтесь:
   ```
   vercel login
   ```
4. Деплой:
   ```
   vercel
   ```
5. После деплоя установите вебхук для бота:
   ```
   curl -F "url=https://your-vercel-deployment-url/api/telegram" https://api.telegram.org/bot[YOUR_BOT_TOKEN]/setWebhook
   ```

## Важно

После деплоя необходимо настроить вебхук для бота, чтобы он работал через Vercel. 